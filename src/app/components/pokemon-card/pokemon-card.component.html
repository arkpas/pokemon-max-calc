<div
  class="pokemon-card"
  [ngClass]="{ 'single-type': !secondaryType, 'dual-type': !!secondaryType }"
  [ngStyle]="{
    '--primary-type-color': getTypeColor(primaryType),
    '--secondary-type-color': getTypeColor(secondaryType)
  }"
>
  <div class="header-inline">
    <img class="sprite" [src]="imageUrl" alt="sprite" />
    <h2 class="name">{{ name }}</h2>

    <div
      *ngIf="avgDamage"
      class="stat"
      title="Åšrednie obraÅ¼enia (bazowe + procentowe)"
    >
      ğŸ’¥
      <strong
        >{{ avgDamage.toFixed(1) }} ({{
          avgDamagePercentage.toFixed(1)
        }}%)</strong
      >
    </div>

    <div *ngIf="heal" class="stat" title="Leczenie (3x Max Heal)">
      ğŸ©¹ <strong>{{ heal.toFixed(0) }}</strong>
    </div>

    <div
      *ngIf="unhealedDamagePercentage != undefined"
      class="stat"
      title="Ile procentowo obraÅ¼eÅ„ nie bÄ™dzie w stanie wyleczyÄ‡ przeciwko wszystkim atakom bossa"
    >
      ğŸ©¸ <strong>{{ unhealedDamagePercentage.toFixed(2) }}</strong>
    </div>

    <div *ngIf="hp" class="stat" title="Punkty Å¼ycia (HP)">
      â¤ï¸ <strong>{{ hp }}</strong>
    </div>

    <div *ngIf="atk" class="stat" title="Atak fizyczny (ATK)">
      âš”ï¸ <strong>{{ atk }}</strong>
    </div>

    <div *ngIf="def" class="stat" title="Obrona fizyczna (DEF)">
      ğŸ›¡ï¸ <strong>{{ def.toFixed(0) }}</strong>
    </div>

    <div class="damage-toggle" style="margin-left: auto">
      <button
        (click)="toggleDetails()"
        class="icon-button"
        title="PokaÅ¼/ukryj szczegÃ³Å‚y obraÅ¼eÅ„"
      >
        {{ showDetails ? "ğŸš«" : "ğŸ‘ï¸" }}
      </button>
    </div>
  </div>

  <div class="damage-section" *ngIf="showDetails">
    <div class="damage-list">
      <details *ngFor="let entry of damageDetails" class="damage-row">
        <summary class="damage-summary">
          <span
            class="col attack-name type-bg {{ entry.moveType.toLowerCase() }}"
          >
            {{ entry.move }}
          </span>
          <span class="col">âš¡ {{ entry.power }}</span>
          <span class="col">ğŸ¯ {{ entry.typeEffectiveness }}</span>
          <span class="col">ğŸ§¬ {{ entry.stab }}</span>
          <span
            class="col damage-stats"
            [ngStyle]="{
              color: getDamagePercentageColor(entry.damagePercentage)
            }"
            >ğŸ’¥ {{ entry.damage.toFixed(1) }} (<strong
              >{{ entry.damagePercentage.toFixed(1) }}%</strong
            >)</span
          >
        </summary>
      </details>
    </div>
  </div>
</div>
